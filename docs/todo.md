# Project TODO
- 버전별로 할 일을 관리한다.
- 각 항목은 체크박스 형식 (`- [ ]`, `- [x]`)을 사용한다.
- Codex는 기본적으로 **가장 최신 버전 섹션**의 `- [ ]` 항목을 우선 고려한다.

---

## v1.0.0 – 구현 완료 정리

### 프로젝트 목표

- [x] 이 코드를 기반으로, 실제 사용자가 Windows에서 실행 파일 형태로 사용할 수 있는 유튜브 다운로드 프로그램의 기본 기능(MVP)을 구현했다.

### 1. 다운로드 방식 (브라우저 / 직접 URL)

요구사항:
- 브라우저에서 유튜브 페이지의 영상/자막을 다운로드 할 수 있어야 한다.
- 사용자가 URL을 직접 입력해서 다운로드할 수 있어야 한다.

구현:
- [x] PySide6 기반 내장 유튜브 브라우저를 구현했다.
  - 뒤로 가기/앞으로 가기, 주소창, 페이지 로딩 기능.
  - 현재 페이지 기준 “다운로드” 버튼 제공.
- [x] 주소 표시줄에 URL을 직접 입력하고 Enter로 이동한 뒤, 해당 페이지의 영상/자막 다운로드를 수행할 수 있다.


### 2. 다운로드 로직 (단일 영상 / 플레이리스트)

요구사항:
- 영상 URL/페이지인 경우 → 해당 영상 하나만 다운로드.
- 플레이리스트 URL/페이지인 경우 → 플레이리스트의 동영상을 모두 저장.

구현:
- [x] yt_dlp 다운로드 스레드에서 단일 영상과 플레이리스트를 분기 처리한다.
- [x] 단일 영상 URL 또는 영상 페이지인 경우, 단일 영상 다운로드 로직으로 동작한다.
- [x] 플레이리스트 URL 또는 페이지인 경우, 플레이리스트 모드로 여러 영상을 다운로드하도록 동작한다.
  - (세부적인 “모든 항목이 100% 저장되는지” 검증/튜닝은 이후 버전에서 추가 보완 예정.)

### 3. 다운로드 옵션 팝업 (품질 / 폴더 / 포맷)

요구사항:
- 다운로드 버튼 클릭 시 팝업으로 다음 옵션을 선택:
  - 동영상 품질 (4K, 1440p, 1080p, 720p, 480p).
  - 저장 폴더 위치 (사용자 선택 / 기본 `downloads/`).
  - 영상 포맷 (mp4 / webm(4K)).

구현:
- [x] 다운로드 옵션 팝업(UI)을 구현했다.
- [x] 해상도 프리셋(480p~4K)을 선택하면 요구사항에 맞는 yt-dlp format 문자열로 매핑된다.
- [x] 저장 폴더:
  - 기본값으로 프로그램 실행 위치의 `downloads/` 폴더를 사용하고, 폴더가 없으면 자동 생성한다.
  - 사용자가 원하는 경우 다른 폴더를 선택할 수 있다.
- [x] 영상 포맷:
  - 일반 해상도는 mp4 중심 포맷으로 다운로드.
  - 4K 등 고해상도 선택 시 webm 포맷을 포함한 적절한 조합으로 처리되도록 설계되어 있다.


### 4. 자막 다운로드

요구사항:
- “자막 다운로드” 체크 시 영상+자막 동시 다운로드.
- “자막 다운로드” + “자막만 다운로드” 체크 시 자막만 다운로드.
- 자막 언어: 한국어, 영어, 태국어.
- 실제 자막이 없으면 다운로드하지 않음.
- 자동 생성(auto-generated) 자막은 다운로드하지 않음.

구현:
- [x] 자막 옵션:
  - “자막 다운로드” / “자막만 다운로드” 토글 구현.
  - 언어 선택(ko/en/th) 체크리스트 구현.
- [x] 단일 영상의 경우, 실제로 제공되는 자막 언어만 다운로드되고, 없으면 안내 후 건너뛴다.
- [x] 플레이리스트의 경우, 요청된 자막 언어 설정을 그대로 적용하여 다운로드 옵션을 구성한다.
- [x] 자동 생성 자막(auto-generated caption)은 다운로드 대상에서 제외되도록 처리했다.

### 5. 진행률 & 상태 표시, 완료 알림

요구사항:
- 콘솔 및 GUI ProgressBar에 진행률 표시.
- 표시 내용:
  - 다운로드 되는 영상의 이름.
  - 다운로드 진행률.
- 다운로드 완료 알림 팝업 + 확인 시 팝업/진행 창 종료.
- “다운로드 준비중 / 영상 분석중” 등 상태 안내.

구현:
- [x] yt_dlp 진행률을 신호로 받아 GUI 진행 팝업에 퍼센트와 상태 텍스트를 표시한다.
- [x] 다운로드 중인 영상의 제목(또는 식별 가능한 이름)을 상태 텍스트에 표시한다.
- [x] 다운로드 완료 시 완료 메시지를 보여주는 팝업을 띄우고, 확인 시 관련 창들을 닫는다.
- [x] “분석 중 / 준비 중 / 다운로드 중”과 같은 상태 메시지를 통해 현재 상황을 안내한다.
- [x] 콘솔 로그를 통해서도 진행 상황 및 완료/오류 정보를 출력한다. (디버깅/개발용)


### 6. 다운로드 중 취소 기능

요구사항:
- “취소” 버튼 클릭 시 현재 다운로드 중인 모든 작업 종료.
- 종료 후 저장 중이던 파일 삭제.

구현:
- [x] 다운로드 진행 팝업에 “취소” 버튼을 제공한다.
- [x] 취소 버튼 클릭 시 yt_dlp 다운로드 스레드를 중단하고, 사용자에게 취소되었음을 안내한다.
- [ ] 취소 시 디스크에 생성된 임시/부분 파일을 모두 정리(삭제)하는 로직은 이후 버전에서 보완 예정.


### 7. 프로그램 디자인 및 브라우저 UI

요구사항:
- 주소 표시줄:
  - 현재 URL 표시.
  - 사용자가 영상 다운로드를 위해 입력.
- 앞으로가기/뒤로가기 버튼 존재.
- 동영상 다운로드 버튼 존재.
- 브라우저 창에서 유튜브 페이지 표시.
- 상단 UI 구성:
  - 뒤로가기, 앞으로가기, 주소 표시줄, 다운로드 버튼 순서.
- UI 아래에 브라우저 엔진.

구현:
- [x] 주소 표시줄에 현재 페이지 URL을 표시하고, 직접 입력/수정이 가능하다.
- [x] 뒤로가기 / 앞으로가기 버튼 구현.
- [x] 다운로드 버튼 구현 (현재 페이지 대상 다운로드 로직과 연동).
- [x] 내장 브라우저 뷰에서 유튜브 페이지를 렌더링한다.
- [x] 상단 레이아웃을 “뒤로가기 → 앞으로가기 → 주소 표시줄 → 다운로드 버튼” 순으로 배치하고, 그 아래에 브라우저 엔진을 배치하는 구조로 구현했다.


### 8. 입력 장치 요구사항 (키보드 / 마우스 버튼)

요구사항:
- 마우스 버튼:
  - front 버튼 → 앞으로가기.
  - back 버튼 → 뒤로가기.
- 키보드:
  - 주소 표시줄에 커서 + Enter → 해당 페이지로 이동.

구현:
- [x] 주소 표시줄에 포커스가 있을 때 Enter 키 입력으로 해당 URL로 이동하도록 처리했다.
- [ ] 마우스 앞/뒤 버튼을 브라우저의 앞으로가기/뒤로가기 동작과 1:1로 연결하는 기능은 환경/드라이버 의존성이 있어, 추후 버전에서 보완/검증 예정.

---

### v1.0.0 구현 요약 (Codex 분석 기준)

- [x] PySide6 기반 내장 유튜브 브라우저: 뒤/앞 이동, 주소창 연동, URL 유효성 검사, 현재 페이지 다운로드 버튼 제공.
- [x] 다운로드 옵션 팝업: 해상도 프리셋(480p~4K) → yt-dlp format 매핑, 컨테이너 선택, 병렬 세그먼트(1~32) 설정, 기본 `downloads/` 경로 생성 후 사용자가 변경 가능.
- [x] 자막 옵션: 자막 다운로드 / 자막만 다운로드 토글, 언어 선택(ko/en/th) 체크리스트, 단일 영상은 실제 제공 언어만 적용하고 없으면 안내, 플레이리스트는 요청 언어 그대로 적용.
- [x] yt_dlp 다운로드 스레드: ffmpeg 자동 경로 검출(개발/배포 경로 대응), 단일/플레이리스트 분기 설정, 자막/영상 옵션 조립 후 다운로드 및 병합, 진행률 신호, 완료·오류 메시지 처리.
- [x] 다운로드 진행 UI: 상태 텍스트와 퍼센트 표시하는 진행 팝업, 취소 버튼 → 스레드 중단 및 사용자 안내.

---

## v1.1.0 – Playlist / UI / Installer

### 기능 – 플레이리스트 다운로드

- [ ] [area: core] [prio: H] 플레이리스트 다운로드 방식을 다음과 같이 변경한다.
  - [ ] [area: core] [prio: H] 전체 플레이리스트를 한 번에 다운로드하는 기능을 구현한다.
  - [ ] [area: core] [prio: M] 세부사항(영상/오디오/자막, 품질 선택 등)을 설정해서 다운로드하는 기능을 구현한다.

### UI / UX

- [ ] [area: ui] [prio: M] 모던한 데스크톱 앱 디자인 트렌드를 조사한다.
- [ ] [area: ui] [prio: H] 조사한 결과를 바탕으로 UI를 모던한 스타일로 리디자인한다.
  - [ ] [area: ui] [prio: M] 메인 화면 레이아웃 개편 (입력 영역 / 다운로드 목록 / 상태 표시 정리)
  - [ ] [area: ui] [prio: M] 버튼/아이콘/컬러 팔레트 정리 및 일관성 확보

### 배포 / 설치

- [ ] [area: build] [prio: M] 설치 방식을 Inno Setup 기반 인스톨러로 변경한다.
  - [ ] [area: build] [prio: M] 기존 PyInstaller 출력물을 Inno Setup 스크립트에서 사용하는 구조로 정리한다.
  - [ ] [area: build] [prio: M] Inno Setup 스크립트에 앱 아이콘, 설치 경로, 시작 메뉴/바로가기 생성 옵션을 설정한다.
  - [ ] [area: build] [prio: L] 설치/제거 플로우를 수동 테스트하고 docs에 설치 방법을 정리한다.

